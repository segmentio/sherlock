#!/usr/bin/env node


/**
 * Dependencies.
 */

var app = module.exports = require('..');
var program = require('commander');

/**
 * CLI.
 */

program
  .option('-p, --port <number>', 'port to listen on', app.port)
  .parse(process.argv);

/**
 * Configuration.
 */

app.port = program.port;

/**
 * Configuration.
 */

app.name = 'Analytics Detective';
app.port = process.env.PORT || 8001;
app.start = function (port) {
  var name = this.name;
  port = port || this.port;

  this.listen(port, function () {
    console.log('\n  %s listening at http://localhost:%d/\n', name, port);
  });
};

/**
 * Start.
 */

if (!module.parent) app.start();
